{"version":3,"sources":["file:///Users/kevindorling/code/test/themes/boc/assets/js/main.js"],"sourcesContent":["// Bank of Canada Theme - Main JavaScript\n\n(function () {\n  \"use strict\";\n\n  // Dropdown Menu Toggle (Click-based for Desktop)\n  function initDropdownMenus() {\n    const mainNav = document.getElementById(\"main-nav\");\n    if (!mainNav) return;\n\n    const dropdownParents = mainNav.querySelectorAll(\".has-dropdown\");\n\n    dropdownParents.forEach(function (parent) {\n      const link = parent.querySelector(\"a\");\n\n      // Add click handler for dropdown toggle\n      link.addEventListener(\"click\", function (e) {\n        // On desktop, prevent default and toggle dropdown\n        if (window.innerWidth \u003e 768) {\n          e.preventDefault();\n\n          // Close all other dropdowns\n          dropdownParents.forEach(function (otherParent) {\n            if (otherParent !== parent) {\n              otherParent.classList.remove(\"dropdown-open\");\n            }\n          });\n\n          // Toggle this dropdown\n          parent.classList.toggle(\"dropdown-open\");\n        } else {\n          // On mobile, toggle mobile-open class\n          e.preventDefault();\n          parent.classList.toggle(\"mobile-open\");\n          console.log(\n            \"Mobile dropdown toggled:\",\n            parent.classList.contains(\"mobile-open\"),\n          );\n        }\n      });\n    });\n\n    // Close dropdowns when clicking outside\n    document.addEventListener(\"click\", function (e) {\n      if (!mainNav.contains(e.target)) {\n        dropdownParents.forEach(function (parent) {\n          parent.classList.remove(\"dropdown-open\");\n          parent.classList.remove(\"mobile-open\");\n        });\n      }\n    });\n\n    // Close dropdowns on Escape key\n    document.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Escape\") {\n        dropdownParents.forEach(function (parent) {\n          parent.classList.remove(\"dropdown-open\");\n          parent.classList.remove(\"mobile-open\");\n        });\n      }\n    });\n  }\n\n  // Mobile Menu Toggle\n  function initMobileMenu() {\n    const mobileToggle = document.getElementById(\"mobile-menu-toggle\");\n    const navContainer = document.querySelector(\".nav-container\");\n    const mainNav = document.getElementById(\"main-nav\");\n\n    if (!mobileToggle || !navContainer) return;\n\n    mobileToggle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n      navContainer.classList.toggle(\"mobile-open\");\n\n      // Update aria-expanded for accessibility\n      const isExpanded = navContainer.classList.contains(\"mobile-open\");\n      mobileToggle.setAttribute(\"aria-expanded\", isExpanded);\n\n      // Change icon\n      mobileToggle.textContent = isExpanded ? \"‚úï\" : \"‚ò∞\";\n\n      // Toggle body class to prevent scrolling\n      if (isExpanded) {\n        document.body.classList.add(\"mobile-menu-open\");\n      } else {\n        document.body.classList.remove(\"mobile-menu-open\");\n      }\n    });\n\n    // Mobile menu can only be closed by clicking the toggle button\n    // (click-outside-to-close functionality removed)\n  }\n\n  // Keyboard Navigation for Dropdowns\n  function initKeyboardNav() {\n    const dropdownParents = document.querySelectorAll(\".has-dropdown\");\n\n    dropdownParents.forEach(function (parent) {\n      const link = parent.querySelector(\"a\");\n      const dropdown = parent.querySelector(\"ul\");\n\n      if (!dropdown) return;\n\n      // Handle keyboard navigation\n      link.addEventListener(\"keydown\", function (e) {\n        // Open dropdown on Enter or Space\n        if (e.key === \"Enter\" || e.key === \" \") {\n          if (window.innerWidth \u003e 768) {\n            e.preventDefault();\n            const firstChild = dropdown.querySelector(\"a\");\n            if (firstChild) firstChild.focus();\n          }\n        }\n\n        // Close on Escape\n        if (e.key === \"Escape\") {\n          link.focus();\n        }\n      });\n\n      // Handle arrow keys within dropdown\n      const dropdownLinks = dropdown.querySelectorAll(\"a\");\n      dropdownLinks.forEach(function (dropdownLink, index) {\n        dropdownLink.addEventListener(\"keydown\", function (e) {\n          if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            const next = dropdownLinks[index + 1] || dropdownLinks[0];\n            next.focus();\n          } else if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            const prev = dropdownLinks[index - 1] || link;\n            prev.focus();\n          } else if (e.key === \"Escape\") {\n            e.preventDefault();\n            link.focus();\n          }\n        });\n      });\n    });\n  }\n\n  // Search Toggle (placeholder functionality)\n  function initSearch() {\n    const searchToggle = document.querySelector(\".search-toggle\");\n\n    if (!searchToggle) return;\n\n    searchToggle.addEventListener(\"click\", function () {\n      alert(\"Search functionality - to be implemented\");\n      // You can implement actual search functionality here\n    });\n  }\n\n  // Language Toggle (placeholder functionality)\n  function initLanguageToggle() {\n    const langToggle = document.querySelector(\".lang-toggle\");\n\n    if (!langToggle) return;\n\n    langToggle.addEventListener(\"click\", function () {\n      // Toggle between EN and FR\n      const currentLang = this.textContent.trim();\n      this.textContent = currentLang === \"FR\" ? \"EN\" : \"FR\";\n\n      // You can implement actual language switching here\n      console.log(\"Language toggle clicked - to be implemented\");\n    });\n  }\n\n  // Theme Toggle (Dark/Light Mode)\n  function initThemeToggle() {\n    const themeToggle = document.getElementById(\"theme-toggle\");\n    const themeIcon = themeToggle?.querySelector(\".theme-icon\");\n\n    if (!themeToggle) return;\n\n    // Check for saved theme preference or default to light mode\n    const currentTheme = localStorage.getItem(\"theme\") || \"light\";\n    document.documentElement.setAttribute(\"data-theme\", currentTheme);\n\n    // Update icon based on current theme\n    if (themeIcon) {\n      themeIcon.textContent = currentTheme === \"dark\" ? \"‚òÄÔ∏è\" : \"üåô\";\n    }\n\n    themeToggle.addEventListener(\"click\", function () {\n      // Get current theme\n      const theme = document.documentElement.getAttribute(\"data-theme\");\n\n      // Toggle theme\n      const newTheme = theme === \"dark\" ? \"light\" : \"dark\";\n\n      // Update DOM\n      document.documentElement.setAttribute(\"data-theme\", newTheme);\n\n      // Update icon\n      if (themeIcon) {\n        themeIcon.textContent = newTheme === \"dark\" ? \"‚òÄÔ∏è\" : \"üåô\";\n      }\n\n      // Save to localStorage\n      localStorage.setItem(\"theme\", newTheme);\n\n      console.log(\"Theme switched to:\", newTheme);\n    });\n  }\n\n  // Smooth Scroll for Skip Link\n  function initSmoothScroll() {\n    const skipLink = document.querySelector(\".skip-link\");\n\n    if (!skipLink) return;\n\n    skipLink.addEventListener(\"click\", function (e) {\n      const target = document.querySelector(\"#main-content\");\n      if (target) {\n        e.preventDefault();\n        target.focus();\n        target.scrollIntoView({ behavior: \"smooth\" });\n      }\n    });\n  }\n\n  // Add scroll behavior to header\n  function initStickyHeader() {\n    const header = document.querySelector(\"header\");\n    const headerContainer = document.querySelector(\".header-container\");\n    const navContainer = document.querySelector(\".nav-container\");\n    let lastScroll = 0;\n    const scrollThreshold = 100; // Scroll amount before hiding header\n\n    if (!header) return;\n\n    window.addEventListener(\"scroll\", function () {\n      const currentScroll = window.pageYOffset;\n\n      // Only apply on large screens\n      if (window.innerWidth \u003e 768) {\n        if (currentScroll \u003e scrollThreshold \u0026\u0026 currentScroll \u003e lastScroll) {\n          // Scrolling down past threshold - hide header top, show only nav\n          header.classList.add(\"header-scrolled\");\n        } else if (currentScroll \u003c scrollThreshold) {\n          // Near top - show full header\n          header.classList.remove(\"header-scrolled\");\n        }\n      } else {\n        // Remove class on mobile\n        header.classList.remove(\"header-scrolled\");\n      }\n\n      // Add shadow when scrolled\n      if (currentScroll \u003e 0) {\n        header.style.boxShadow = \"0 2px 8px rgba(0, 0, 0, 0.15)\";\n      } else {\n        header.style.boxShadow = \"0 2px 4px rgba(0, 0, 0, 0.1)\";\n      }\n\n      lastScroll = currentScroll;\n    });\n  }\n\n  // Handle window resize\n  function initResizeHandler() {\n    let resizeTimer;\n\n    window.addEventListener(\"resize\", function () {\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(function () {\n        const navContainer = document.querySelector(\".nav-container\");\n        const mobileToggle = document.getElementById(\"mobile-menu-toggle\");\n\n        // Reset mobile menu on desktop\n        if (window.innerWidth \u003e 768 \u0026\u0026 navContainer) {\n          navContainer.classList.remove(\"mobile-open\");\n          document.body.classList.remove(\"mobile-menu-open\");\n          if (mobileToggle) {\n            mobileToggle.setAttribute(\"aria-expanded\", \"false\");\n            mobileToggle.textContent = \"‚ò∞\";\n          }\n        }\n      }, 250);\n    });\n  }\n\n  // Initialize all functionality when DOM is ready\n  function init() {\n    initDropdownMenus();\n    initMobileMenu();\n    initKeyboardNav();\n    initSearch();\n    initLanguageToggle();\n    initThemeToggle();\n    initSmoothScroll();\n    initStickyHeader();\n    initResizeHandler();\n\n    console.log(\"Bank of Canada theme initialized\");\n  }\n\n  // Run initialization\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", init);\n  } else {\n    init();\n  }\n})();\n"],"mappings":"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","names":[]}